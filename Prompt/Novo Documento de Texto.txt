# CONTEXTO DO PROJETO
Estou trabalhando no RhSensoERP v2, um sistema ERP corporativo multi-tenant com arquitetura Clean Architecture em .NET 8 + ASP.NET Core Web API.

# ESTRUTURA DO PROJETO
- **API**: Controllers (ASP.NET Core Web API)
- **Application**: DTOs, Services, Mappings (AutoMapper)
- **Core**: Entities (Domain Models)
- **Infrastructure**: Configurations (EF Core), Repositories, DbContext

# ARQUIVOS DE REFER√äNCIA (PADR√ÉO A SEGUIR)
[Cole aqui os arquivos do Municipio que enviei]

# ENTIDADE PARA GERAR CRUD
[Cole aqui a entidade espec√≠fica que deseja gerar]

# TABELA DO BANCO DE DADOS
Tabela: [nome_da_tabela]
Schema: dbo
Chave Prim√°ria: [campo_pk]
√çndices √önicos: [listar se houver]

# RELACIONAMENTOS (se houver)
- FK para [TabelaPai]: [campo_fk]
- Cole√ß√£o de [TabelaFilha]: navega√ß√£o virtual

# REQUISITOS OBRIGAT√ìRIOS

## 1Ô∏è‚É£ CONTROLLER (API REST)
üìÅ Caminho: `src/API/Controllers/GestaoDePessoas/Tabelas/Pessoal/[Entidade]Controller.cs`

‚úÖ Deve conter:
- Herdar de `ControllerBase`
- Route: `api/v1/gestaodepessoas/tabelas/pessoal/[recurso]`
- `[Authorize]` para seguran√ßa
- Swagger annotations completas (SwaggerOperation, SwaggerTag)
- Inje√ß√£o de: Repository, IMapper, ILogger
- Endpoints CRUD completos:
  - **GET** `/` - GetAll (lista completa ordenada)
  - **GET** `/{id}` - GetById (com NotFound se n√£o existir)
  - **POST** `/` - Create (valida√ß√£o de duplica√ß√£o, retorna 201 Created)
  - **PUT** `/{id}` - Update (valida√ß√£o, retorna 200 OK)
  - **DELETE** `/{id}` - Delete (verifica integridade, retorna 204 NoContent)
- Logs estruturados com contexto (LogInformation, LogWarning)
- Valida√ß√µes de duplica√ß√£o antes de Insert/Update
- Tratamento de conflitos (409 Conflict) e n√£o encontrado (404 NotFound)
- Mensagens de erro descritivas: `{ message: "..." }`
- ProducesResponseType para documenta√ß√£o Swagger

‚ùå N√ÉO usar:
- C√≥digos hardcoded sem constantes
- Exception sem tratamento
- Retornar entidade diretamente (sempre usar DTO)

---

## 2Ô∏è‚É£ DTOs (DATA TRANSFER OBJECTS)
üìÅ Caminho: `src/Modules/GestaoDePessoas/Application/DTOs/[Entidade]Dto.cs`

‚úÖ Deve conter:
- **Record type** (`public sealed record`)
- Data Annotations completas:
  - `[Required]` com mensagens customizadas
  - `[StringLength]` com min/max
  - `[Range]` para num√©ricos
  - `[RegularExpression]` para formatos espec√≠ficos
- Coment√°rios XML (///<summary>)
- Propriedades com `init` (imutabilidade)
- Valores default com `= string.Empty` ou `= 0`
- Separar DTOs se necess√°rio:
  - `[Entidade]Dto` (leitura)
  - `Create[Entidade]Dto` (cria√ß√£o, sem Id)
  - `Update[Entidade]Dto` (edi√ß√£o)

‚ùå N√ÉO usar:
- Classes mut√°veis
- Propriedades sem valida√ß√£o
- Tipos nullable sem necessidade

---

## 3Ô∏è‚É£ AUTOMAPPER PROFILE
üìÅ Caminho: `src/Modules/GestaoDePessoas/Application/Mappings/[Entidade]Profile.cs`

‚úÖ Deve conter:
- Herdar de `Profile`
- Sealed class
- Mapeamentos bidirecionais:
  - `Entity -> Dto`
  - `Dto -> Entity` (com `.ForMember(dest => dest.Id, opt => opt.Ignore())`)
- Configura√ß√µes customizadas se houver convers√µes especiais

---

## 4Ô∏è‚É£ ENTITY (DOMAIN MODEL)
üìÅ Caminho: `src/Modules/GestaoDePessoas/Core/Entities/Tabelas/Pessoal/[Entidade].cs`

‚úÖ Deve conter:
- POCO simples (sem data annotations, sem l√≥gica de persist√™ncia)
- Propriedades p√∫blicas com get/set
- Chave prim√°ria (Guid Id ou string Codigo)
- Propriedades de navega√ß√£o virtual para relacionamentos
- Cole√ß√µes inicializadas no construtor:
```csharp
  public [Entidade]()
  {
      RelacionamentoFilho = new HashSet<Filha>();
  }
```
- Coment√°rios XML (///<summary>)

‚ùå N√ÉO incluir:
- Data Annotations ([Required], [MaxLength], etc.)
- Valida√ß√µes no modelo
- L√≥gica de neg√≥cio

---

## 5Ô∏è‚É£ EF CORE CONFIGURATION (FLUENT API)
üìÅ Caminho: `src/Modules/GestaoDePessoas/Infrastructure/Persistence/Configurations/Tabelas/Pessoal/[Entidade]Configuration.cs`

‚úÖ Deve conter:
- Implementar `IEntityTypeConfiguration<[Entidade]>`
- Mapeamento completo:
  - `ToTable("nome_tabela_legado")`
  - `HasKey()` com chave prim√°ria
  - Todas as propriedades com `.HasColumnName("coluna_legado")`
  - `.HasColumnType()` para char, varchar, decimal, etc.
  - `.IsRequired()` para campos obrigat√≥rios
  - `.HasMaxLength()` para strings
  - `.HasDefaultValueSql()` se houver (ex: newsequentialid())
- √çndices:
  - `.HasIndex().IsUnique()` para constraints
  - `.HasDatabaseName()` para preservar nome original
- Relacionamentos:
  - `.HasOne().WithMany()`
  - `.HasForeignKey()`
  - `.OnDelete(DeleteBehavior.Restrict)` se necess√°rio

‚ùå N√ÉO esquecer:
- √çndices √∫nicos (UX_*)
- Foreign Keys
- Tipos de coluna espec√≠ficos (char, varchar, decimal(18,2))

---

## 6Ô∏è‚É£ REPOSITORY (se necess√°rio)
üìÅ Caminho: `src/Modules/GestaoDePessoas/Infrastructure/Persistence/Repositories/[Entidade]Repository.cs`

‚úÖ Deve conter:
- Interface `I[Entidade]Repository`
- Implementa√ß√£o com DbContext injetado
- M√©todos ass√≠ncronos:
  - `GetAllAsync()`
  - `GetByIdAsync(id)`
  - `AddAsync(entity)`
  - `UpdateAsync(entity)`
  - `DeleteAsync(id)`
  - `ExistsAsync(id)` para valida√ß√µes
  - M√©todos customizados (ex: `GetByEstadoAsync(uf)`)
- `await _context.SaveChangesAsync()`

---

## 7Ô∏è‚É£ REGISTRAR NO DbContext
üìÅ Caminho: `src/Modules/GestaoDePessoas/Infrastructure/Persistence/Contexts/GestaoDePessoasDbContext.cs`

‚úÖ Adicionar:
```csharp
public DbSet<[Entidade]> [Entidades] { get; set; }
```

‚ùå N√ÉO esquecer:
- Nome plural para DbSet
- Ordem alfab√©tica (organiza√ß√£o)

---

# INSTRU√á√ïES FINAIS

1. **Gere TODOS os 7 arquivos completos**
2. **Use caminhos exatos** conforme especificado
3. **Siga rigorosamente o padr√£o de Municipio**
4. **Inclua logs estruturados** em todas as opera√ß√µes
5. **Valide duplica√ß√µes** antes de Insert/Update
6. **Trate integridade referencial** no Delete
7. **Use nomenclatura consistente** (PascalCase, nomes descritivos)
8. **Adicione coment√°rios XML** em classes e m√©todos p√∫blicos
9. **Configure Swagger** completamente
10. **Teste c√≥digos completos** - sem placeholders

# FORMATO DE RESPOSTA ESPERADO

Para cada arquivo, forne√ßa:

# CHECKLIST FINAL
- [ ] Controller com 5 endpoints CRUD
- [ ] DTO com valida√ß√µes completas
- [ ] AutoMapper Profile configurado
- [ ] Entity POCO sem data annotations
- [ ] Configuration com Fluent API completa
- [ ] Repository (se aplic√°vel)
- [ ] DbSet registrado no contexto
- [ ] Logs em opera√ß√µes cr√≠ticas
- [ ] Tratamento de erros HTTP
- [ ] Swagger documentado
- [ ] C√≥digo sem erros de compila√ß√£o
- [ ] Segue 100% o padr√£o de Municipio